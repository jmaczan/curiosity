#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#define HIDDEN_LAYER_DIM 38
#define OUTPUT_DIM 10
int indices[] = {182, 183, 184, 185, 237, 238, 241, 242, 263, 264,
                 354, 378, 379, 381, 382, 405, 406, 409, 433, 434,
                 437, 461, 462, 464, 490, 491, 492, 546, 573, 574,
                 575, 598, 603, 626, 627, 628, 629, 630};
float weights[] = {
    -1.8440019,   4.045327,      -0.98317057,   1.111185,    -2.205314,
    0.76614237,   -1.4190589,    -3.074428,     -0.17179531, -1.2471781,
    -1.4332223,   -0.44101006,   1.0619991,     -0.26224798, 0.2306693,
    -0.41009817,  1.3798176,     2.1789002,     0.18974866,  1.4046758,
    -1.0723819,   -0.0109824585, -0.33992139,   0.43960366,  0.81785905,
    0.36789107,   -0.0019340299, 1.125584,      0.28476366,  0.61211824,
    -2.4550123,   0.8975503,     1.678553,      -1.5977603,  0.5789244,
    -0.5740228,   0.9999419,     -1.7821876,    1.4087085,   -0.32004538,
    -0.04328194,  0.31371364,    0.20309632,    -0.16650422, -0.9467488,
    -0.22196445,  0.71938294,    -0.6559876,    0.51852006,  0.7677886,
    -0.40773293,  -3.1343913,    0.8315843,     1.0800264,   2.1486528,
    0.45071936,   1.7761344,     2.6951041,     -0.5025297,  1.1805147,
    -0.61695236,  0.14423694,    -0.8976524,    1.2149761,   0.26008096,
    0.38754267,   -0.5164375,    0.24637689,    -0.4557795,  -0.19388603,
    0.25179932,   -0.9819542,    -0.10648724,   0.28713438,  -0.20042336,
    -0.26512334,  -0.49615833,   0.3197439,     -0.49543542, 0.42083722,
    1.5038259,    0.6737206,     1.0610807,     0.23576874,  -0.6497305,
    0.6253688,    0.8413411,     -1.848172,     1.0186754,   -0.70934063,
    0.48240647,   0.06724779,    0.30790666,    0.051418327, -0.039007936,
    -0.506883,    -1.0422113,    -1.455806,     0.24010105,  0.031616636,
    -0.18138602,  0.44608957,    -0.43187663,   -0.63559693, 0.30551273,
    -0.38448393,  -0.74065393,   -1.3301841,    0.45379794,  0.02959165,
    -3.455312,    2.323309,      -0.0979888,    0.87920856,  0.5574879,
    0.4032382,    0.49525982,    0.30179548,    0.55514383,  -0.17066585,
    -0.05023788,  -0.36729005,   0.053404313,   0.101956695, -0.33590657,
    0.20549694,   -0.09998492,   -0.025586763,  0.6024324,   -0.046572164,
    -0.09766791,  0.1436545,     -1.5645239,    0.36950564,  -0.0692029,
    1.309788,     -1.232915,     0.39455417,    0.40456605,  -0.2731491,
    1.3729082,    0.55349356,    -0.73905617,   1.0943912,   -0.36292267,
    0.68849546,   -2.7237499,    0.008096007,   0.037655346, -0.71847767,
    -0.81881845,  0.32629824,    -0.38634682,   -1.234547,   0.8364296,
    -1.5541924,   -0.7475426,    0.31235498,    -0.10032185, 0.67835695,
    1.5583955,    -0.1403515,    -0.10527823,   0.01725332,  0.2660327,
    -0.115833975, 0.26282144,    -0.12816976,   0.32735875,  -0.49425244,
    0.8656843,    -0.4586245,    1.5090516,     1.5554684,   -1.3958809,
    0.5860914,    -0.18094172,   -1.1928884,    0.82845956,  -0.6540641,
    0.3871599,    -0.42964247,   -0.5292941,    -0.59001625, 0.43185005,
    -0.1341024,   -1.2032557,    0.7351221,     -0.3009022,  0.9470866,
    -2.6575418,   0.3377098,     0.57225895,    0.53542507,  2.0408254,
    -0.85166806,  0.28863114,    1.7232363,     0.81234485,  1.5518522,
    -3.3470495,   1.5151821,     1.4611435,     -1.7568191,  0.6987172,
    -0.7740895,   1.2325442,     -0.07032712,   0.44809708,  -0.5017254,
    1.9731358,    -0.060760222,  0.36131266,    0.9537427,   0.28869307,
    0.8945901,    -3.413383,     0.4627937,     0.65024155,  0.48632705,
    0.14339238,   -0.1997059,    -1.4186076,    -0.99341834, 0.5358235,
    0.02775538,   0.7161008,     0.10812548,    -0.08972241, -0.5430858,
    -0.96193224,  0.41681275,    -0.38720372,   0.52253,     0.942762,
    0.155258,     0.49780798,    0.6771807,     -0.7362043,  0.7761359,
    1.0814755,    -0.55796754,   -0.58982855,   0.054741204, 0.73294336,
    1.2819939,    -0.1665194,    -3.722914,     0.8548452,   -0.9909204,
    1.2473688,    0.4003419,     0.48581028,    -0.17565878, -1.0171362,
    0.5377409,    2.8117967,     -0.30465358,   -0.7274666,  -0.82415336,
    -0.122058496, -1.8872999,    0.9929384,     0.61173534,  1.4549148,
    1.2254059,    1.3507997,     0.2077125,     0.07973979,  0.958754,
    -0.6618811,   -1.336761,     -0.10806493,   -0.35320884, -0.41407824,
    -0.7797319,   -0.8809064,    -0.1548825,    -0.68146694, 0.24249785,
    -0.63623047,  -2.4384582,    0.62331134,    0.40894896,  0.27344048,
    -2.0512588,   -0.23066455,   1.9742273,     1.40516,     1.2908726,
    2.600473,     1.285565,      -0.03028117,   1.17655,     -2.085257,
    1.627937,     0.43281296,    1.283779,      0.30596158,  1.1786928,
    1.8069206,    -0.25257224,   1.5494698,     -1.0524725,  -2.7046623,
    0.64271784,   1.6209333,     -1.6194843,    0.064976074, -2.293847,
    0.15319385,   -2.180336,     0.99944097,    0.97467214,  0.47898966,
    1.3394482,    0.4528309,     -0.12606633,   0.20281641,  -0.16036087,
    -0.38648513,  0.3435014,     0.49444056,    0.2609833,   -0.509192,
    -0.41324267,  1.2830025,     -0.0034895558, -0.7934959,  -0.845218,
    0.39726442,   -0.44409063,   0.3752375,     -0.32408956, -0.3205124,
    -0.22519289,  1.4284872,     -0.48005268,   -0.24139142, -0.4265843,
    0.8929522,    -0.28987017,   0.36104503,    0.9128395,   0.022363577,
    0.13956079,   -0.9546234,    1.9808547,     -0.46727505, 1.124584,
    -0.014739669, 0.18219103,    0.6320472,     -0.19447377, 0.30858874,
    0.75196195,   0.07082215,    0.33964595,    0.3124098,   -0.20889416,
    1.0365226,    -2.1122792,    -0.58238614,   -1.2833996,  -0.15307324,
    1.144265,     -0.34139436,   1.2256995,     0.5789979,   1.2770035,
    -0.65654063,  -0.08785243,   0.12824842,    1.1107517,   0.5218312,
    0.14819768,   0.0066918037,  0.7337636,     0.23492748,  1.2529827};
int main(int argc, char *argv[]) {
  float *activations = calloc(OUTPUT_DIM, sizeof(float));
  memset(activations, 0, OUTPUT_DIM * sizeof(float));
  for (int j = 0; j < OUTPUT_DIM; j++) {
    for (int i = 0; i < HIDDEN_LAYER_DIM; i++) {
      activations[j] +=
          weights[j + i * OUTPUT_DIM] * strtof(argv[indices[i]], NULL) / 255.0f;
    }
  }

  float max_output = activations[0];
  int max_output_id = 0;
  for (int i = 0; i < OUTPUT_DIM; i++) {
    if (activations[i] > max_output) {
      max_output = activations[i];
      max_output_id = i;
    }
  }
  free(activations);
  printf("predicted: %i \n \n", max_output_id);
  return 0;
}